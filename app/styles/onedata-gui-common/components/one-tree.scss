$one-tree-indent: 35px;
$one-tree-bullet-top: 13px;
$one-tree-bullet-size: 17px;
// all possible border-style values
$one-tree-border-styles: none hidden dotted dashed solid double groove ridge inset outset;

.one-tree {
  background-color: $color-one-white;

  @each $border-style in $one-tree-border-styles {
    &.border-#{$border-style},
    &.border-#{$border-style} .one-tree,
    & .one-tree-list > li .one-tree.border-#{$border-style} {
      > .one-tree-list {
        border-left-style: $border-style;
        > li:before {
          border-top-style: $border-style;
        }
      }
    }
  }
  &.has-items > .one-tree-list {
    padding-top: 15px;
  }
  .one-tree-list {
    position: relative;
    padding: 0;
    transition: padding-top $collapse-transition-time linear;
    border-left: 1px solid $main-border-color;
    list-style-type: none;
    background-color: inherit;

    .one-tree {
      margin-left: -($one-tree-bullet-size / 2 + $padding-xs-horizontal + 1px);
    }

    > li {
      position: relative;
      padding-left: $one-tree-indent;
      padding-bottom: $padding-base-vertical;
      background-color: inherit;
      transition: $height-collapse-transition, padding-bottom $collapse-transition-time linear;

      &:before {
        content: '';
        display: block;
        position: absolute;
        top: $one-tree-bullet-top;
        left: 0;
        width: $one-tree-indent - $one-tree-bullet-size - 3px;
        z-index: 1;
        border-top: 1px solid $main-border-color;
      }

      &::after {
        content: '';
        display: block;
        position: absolute;
        top: $one-tree-bullet-top + 1px;
        bottom: 0;
        left: -2px;
        width: 5px;
        background-color: inherit;
        opacity: 0;
        transition: opacity 0.2s;
      }

      &:last-child, &.last {
        padding-bottom: 0px;
        &::after {
          opacity: 1;
        }
      }

      &.has-subtree {
        > .one-tree-item-content,
        > .tree-circle {
          @extend .clickable
        }
      }

      &.collapse-hidden {
        padding-bottom: 0;
        margin-left: -2px;
        padding-left: $one-tree-indent + 2px;
        opacity: 1;
        &:before {
          display: none;
          left: 2px;
        }
        > .tree-circle {
          left: $one-tree-indent - $one-tree-bullet-size - $padding-xs-horizontal + 2px;
        }
      }

      > .tree-circle {
        position: absolute;
        left: $one-tree-indent - $one-tree-bullet-size - $padding-xs-horizontal;
        top: $one-tree-bullet-top + 2px;
        transform: translateY(-50%);
        background-color: inherit;
        color: darken($main-border-color, 30%);
        .one-icon {
          font-size: $one-tree-bullet-size;
        }
      }

      > .one-tree-item-content {
        padding: $padding-small-vertical 0;
      }
    }
  }
}
